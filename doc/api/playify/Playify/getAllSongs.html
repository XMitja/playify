<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1, user-scalable=no">
  <meta name="description" content="API docs for the getAllSongs method from the Playify class, for the Dart programming language.">
  <title>getAllSongs method - Playify class - playify library - Dart API</title>

  
  <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:500,400i,400,300|Source+Sans+Pro:400,300,700" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link rel="stylesheet" href="../../static-assets/github.css">
  <link rel="stylesheet" href="../../static-assets/styles.css">
  <link rel="icon" href="../../static-assets/favicon.png">

</head>

<body data-base-href="../../"
      data-using-base-href="false">

<div id="overlay-under-drawer"></div>

<header id="title">
  <button id="sidenav-left-toggle" type="button">&nbsp;</button>
  <ol class="breadcrumbs gt-separated dark hidden-xs">
    <li><a href="../../index.html">playify</a></li>
    <li><a href="../../playify/playify-library.html">playify</a></li>
    <li><a href="../../playify/Playify-class.html">Playify</a></li>
    <li class="self-crumb">getAllSongs method</li>
  </ol>
  <div class="self-name">getAllSongs</div>
  <form class="search navbar-right" role="search">
    <input type="text" id="search-box" autocomplete="off" disabled class="form-control typeahead" placeholder="Loading search...">
  </form>
</header>

<main>

  <div id="dartdoc-sidebar-left" class="col-xs-6 col-sm-3 col-md-2 sidebar sidebar-offcanvas-left">
    <header id="header-search-sidebar" class="hidden-l">
      <form class="search-sidebar" role="search">
        <input type="text" id="search-sidebar" autocomplete="off" disabled class="form-control typeahead" placeholder="Loading search...">
      </form>
    </header>
    
    <ol class="breadcrumbs gt-separated dark hidden-l" id="sidebar-nav">
      <li><a href="../../index.html">playify</a></li>
      <li><a href="../../playify/playify-library.html">playify</a></li>
      <li><a href="../../playify/Playify-class.html">Playify</a></li>
      <li class="self-crumb">getAllSongs method</li>
    </ol>
    
    <h5>Playify class</h5>
    <ol>
    
        <li class="section-title"><a href="../../playify/Playify-class.html#constructors">Constructors</a></li>
        <li><a href="../../playify/Playify/Playify.html">Playify</a></li>
    
        <li class="section-title inherited">
            <a href="../../playify/Playify-class.html#instance-properties">Properties</a>
        </li>
        <li class="inherited"><a href="../../playify/Playify/hashCode.html">hashCode</a></li>
        <li class="inherited"><a href="../../playify/Playify/runtimeType.html">runtimeType</a></li>
    
        <li class="section-title"><a href="../../playify/Playify-class.html#instance-methods">Methods</a></li>
        <li><a href="../../playify/Playify/getAllSongs.html">getAllSongs</a></li>
        <li><a href="../../playify/Playify/next.html">next</a></li>
        <li><a href="../../playify/Playify/nowPlaying.html">nowPlaying</a></li>
        <li><a href="../../playify/Playify/pause.html">pause</a></li>
        <li><a href="../../playify/Playify/play.html">play</a></li>
        <li><a href="../../playify/Playify/previous.html">previous</a></li>
        <li><a href="../../playify/Playify/setQueue.html">setQueue</a></li>
        <li class="inherited"><a href="../../playify/Playify/noSuchMethod.html">noSuchMethod</a></li>
        <li class="inherited"><a href="../../playify/Playify/toString.html">toString</a></li>
    
        <li class="section-title inherited"><a href="../../playify/Playify-class.html#operators">Operators</a></li>
        <li class="inherited"><a href="../../playify/Playify/operator_equals.html">operator ==</a></li>
    
    
    
        <li class="section-title"><a href="../../playify/Playify-class.html#constants">Constants</a></li>
        <li><a href="../../playify/Playify/playerChannel-constant.html">playerChannel</a></li>
    
    
    </ol>
  </div><!--/.sidebar-offcanvas-->

  <div id="dartdoc-main-content" class="col-xs-12 col-sm-9 col-md-8 main-content">
      <div><h1><span class="kind-method">getAllSongs</span> method</h1></div>

    <section class="multi-line-signature">
      <span class="returntype">Future<span class="signature">&lt;<wbr><span class="type-parameter">List<span class="signature">&lt;<wbr><span class="type-parameter"><a href="../../playify/Artist-class.html">Artist</a></span>&gt;</span></span>&gt;</span></span>
            <span class="name ">getAllSongs</span>
(<wbr><ol class="parameter-list"><li><span class="parameter" id="getAllSongs-param-sort">{<span class="type-annotation">bool</span> <span class="parameter-name">sort</span>: <span class="default-value">false</span>, </span></li>
<li><span class="parameter" id="getAllSongs-param-coverArtSize"><span class="type-annotation">int</span> <span class="parameter-name">coverArtSize</span>: <span class="default-value">50</span>}</span></li>
</ol>)
      
    </section>
    <section class="desc markdown">
      <p>Fetch all songs in the Apple Music library.
This method may take up significant time due to the amount of songs available on the phone.
Make sure to display a waiting animation while this is fetching.
All cover art is fetched when using this function. Due the amount of songs, the app may crash if the device does not have enough memory. In this case, the size of the cover art should be reduced.</p>
    </section>
    
    <section class="summary source-code" id="source">
      <h2><span>Implementation</span></h2>
      <pre class="language-dart"><code class="language-dart">Future&lt;List&lt;Artist&gt;&gt; getAllSongs({bool sort = false, int coverArtSize = 50}) async {
  if(Platform.isIOS){
    try{
      List&lt;Artist&gt; artists = [];
      var result = await playerChannel.invokeMethod(&#39;getAllSongs&#39;, &lt;String, dynamic&gt;{
        &quot;size&quot;: coverArtSize
      });
    &#47;&#47; print(result[0]);
      for(int a=0; a&lt;result.length; a++) {
        stdout.write(a.toString() + &quot;, &quot;);
        var resobj = new Map&lt;String, dynamic&gt;.from(result[a]);
        Artist artist = Artist(albums: [], name: resobj[&quot;artist&quot;]);
        Image image = resobj[&quot;image&quot;] != null ? Image.memory(resobj[&quot;image&quot;]) : null;
        Album album = Album(songs: [], title: resobj[&quot;albumTitle&quot;], albumTrackCount: resobj[&quot;albumTrackCount&quot;], coverArt: image, diskCount: resobj[&quot;diskCount&quot;], artistName: artist.name);
        Song song = Song(albumTitle: album.title, title: resobj[&quot;songTitle&quot;], trackNumber: resobj[&quot;albumTrackNumber&quot;], discNumber: resobj[&quot;discNumber&quot;], isExplicit: resobj[&quot;isExplicitItem&quot;], playCount: resobj[&quot;playCount&quot;], iOSSongID: resobj[&quot;songID&quot;].toString(), artistName: artist.name);
        album.songs.add(song);
        artist.albums.add(album);
        album.artistName = artist.name;
        bool foundArtist = false;
        for(int i=0; i&lt;artists.length; i++){
          if(artist.name == artists[i].name){
            foundArtist = true;
            bool foundAlbum = false;
            for(int j=0; j&lt;artists[i].albums.length; j++){
              if(artists[i].albums[j].title == album.title){
                artists[i].albums[j].songs.add(song);
                print(&quot;sorted&quot;);
                artists[i].albums[j].songs.sort((a, b) =&gt; a.trackNumber - b.trackNumber);
                foundAlbum = true;
                break;
              }
            }
            if(!foundAlbum){
              artists[i].albums.add(album);
            }
          }
        }
        if(!foundArtist){
          artists.add(artist);
        }
      }
      if(sort)
        artists.sort((a, b) =&gt; a.name.compareTo(b.name));
      return artists;
    } catch(e){
      print(e);
      return [];
    }
  }
}</code></pre>
    </section>

  </div> <!-- /.main-content -->

  <div id="dartdoc-sidebar-right" class="col-xs-6 col-sm-6 col-md-2 sidebar sidebar-offcanvas-right">
  </div><!--/.sidebar-offcanvas-->

</main>

<footer>
  <span class="no-break">
    playify
      0.0.1
  </span>

</footer>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="../../static-assets/typeahead.bundle.min.js"></script>
<script src="../../static-assets/highlight.pack.js"></script>
<script src="../../static-assets/URI.js"></script>
<script src="../../static-assets/script.js"></script>


</body>

</html>
